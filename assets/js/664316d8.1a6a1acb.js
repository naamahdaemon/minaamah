"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5017],{67378:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var i=o(85893),r=o(11151);const a={sidebar_position:3,sidebar_label:"Running Mainnet using Docker UPDATED VERSION 2025",sidebar_class_name:"green"},t="Running Mina Mainnet with Docker",s={id:"Node operator guide/Run_Docker_Mainnet/running_docker_mainnet - UPDATE",title:"Running Mina Mainnet with Docker",description:"Docker installation",source:"@site/docs/04-Node operator guide/Run_Docker_Mainnet/running_docker_mainnet - UPDATE.md",sourceDirName:"04-Node operator guide/Run_Docker_Mainnet",slug:"/Node operator guide/Run_Docker_Mainnet/running_docker_mainnet - UPDATE",permalink:"/docs/Node operator guide/Run_Docker_Mainnet/running_docker_mainnet - UPDATE",draft:!1,unlisted:!1,editUrl:"https://github.com/naamahdaemon/minaamah/tree/main/docs/04-Node operator guide/Run_Docker_Mainnet/running_docker_mainnet - UPDATE.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Running Mainnet using Docker UPDATED VERSION 2025",sidebar_class_name:"green"},sidebar:"mainSidebar",previous:{title:"Running Mina Archive Node with Docker",permalink:"/docs/Node operator guide/Run_Docker_Mainnet/running_docker_mainnet_archive"},next:{title:"Running Mina Berkeley Node with Docker",permalink:"/docs/Node operator guide/Running_Docker_Berkeley_Node/running_berkeley"}},c={},d=[{value:"Docker installation",id:"docker-installation",level:2},{value:"1. Delete old version (optionnal/recommanded)",id:"1-delete-old-version-optionnalrecommanded",level:3},{value:"2. Install dependencies",id:"2-install-dependencies",level:3},{value:"3. Add Official Docker repository key",id:"3-add-official-docker-repository-key",level:3},{value:"5. Add official Docker package repository",id:"5-add-official-docker-package-repository",level:3},{value:"6. Update package list and install docker",id:"6-update-package-list-and-install-docker",level:3},{value:"\u2705 Check Docker version",id:"-check-docker-version",level:3},{value:"Prepare Mina Docker environment",id:"prepare-mina-docker-environment",level:2},{value:"Run Mina docker container",id:"run-mina-docker-container",level:2},{value:"Check everything is ok",id:"check-everything-is-ok",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"running-mina-mainnet-with-docker",children:"Running Mina Mainnet with Docker"}),"\n",(0,i.jsx)(n.h2,{id:"docker-installation",children:"Docker installation"}),"\n",(0,i.jsx)(n.h3,{id:"1-delete-old-version-optionnalrecommanded",children:"1. Delete old version (optionnal/recommanded)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"apt-cache policy docker-ce\nsudo apt remove docker docker-engine docker.io containerd runc\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-install-dependencies",children:"2. Install dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install -y ca-certificates curl gnupg lsb-release\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-add-official-docker-repository-key",children:"3. Add Official Docker repository key"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'sudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/$(. /etc/os-release; echo "$ID")/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-add-official-docker-package-repository",children:"5. Add official Docker package repository"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo \\\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \\\n  https://download.docker.com/linux/$(. /etc/os-release; echo "$ID") \\\n  $(lsb_release -cs) stable" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n'})}),"\n",(0,i.jsx)(n.h3,{id:"6-update-package-list-and-install-docker",children:"6. Update package list and install docker"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\nsudo usermod -aG docker $USER\nnewgrp docker\n"})}),"\n",(0,i.jsx)(n.h3,{id:"-check-docker-version",children:"\u2705 Check Docker version"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker --version\ndocker compose version     # (avec un espace, pour la version V2)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"prepare-mina-docker-environment",children:"Prepare Mina Docker environment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'$ mkdir docker\n$ cd docker\n$ mkdir mina\n$ cd mina\n$ mkdir .mina-config\n$ cp ~/.mina-env ./\n$ cp -r ~/keys/ ./\n$ ll\n keys\n .mina-env\ncat .mina-env\nexport CODA_PRIVKEY_PASS=""\nexport MINA_PRIVKEY_PASS=""\nexport UPTIME_PRIVKEY_PASS=""\nPEER_LIST_URL=https://storage.googleapis.com/mina-seed-lists/mainnet_seeds.txt\n\nEXTRA_FLAGS=" --external-port 8302 --limited-graphql-port 3095 --coinbase-receiver <COINBASE_RECEIVER_ADDRESS>  --metrics-port 6060 --block-producer-key /keys/my-wallet --uptime-submitter-key /keys/my-wallet --uptime-url https://uptime-backend.minaprotocol.com/v1/submit --external-ip <EXTERNAL_IP> --insecure-rest-server"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"run-mina-docker-container",children:"Run Mina docker container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'docker run --name mina -d -p 4085:3085 -p 4095:3095 -p 7060:6060 -p 9302:8302 --restart=always --mount "type=bind,source=$(pwd)/.mina-env,dst=/entrypoint.d/mina-env,readonly" --mount "type=bind,source=$(pwd)/keys,dst=/keys,readonly" --mount "type=bind,source=$(pwd)/.mina-config,dst=/root/.mina-config" gcr.io/o1labs-192920/mina-daemon:3.2.0-beta2-939b08d-noble-mainnet daemon\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsxs)(n.p,{children:["Don't forget to open the port that is mapped to your port 8302 (here ",(0,i.jsx)(n.strong,{children:"9302"}),") on your firewall otherwise you may have troubles syncing with peers."]})}),"\n",(0,i.jsx)(n.h2,{id:"check-everything-is-ok",children:"Check everything is ok"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'docker logs -tf mina\n\n2025-08-01 10:23:32 UTC [Info] Mina daemon is booting up; built with commit "939b08d879e4284829c897f8fa660ef89095b28e"\n2025-08-01 10:23:32 UTC [Info] Booting may take several seconds, please wait\n2025-08-01 10:23:32 UTC [Info] Reading configuration files $config_files\n  config_files: [ "/var/lib/coda/config_939b08d8.json", "/root/.mina-config/daemon.json" ]\n2025-08-01 10:23:32 UTC [Warn] Could not read configuration from "/root/.mina-config/daemon.json"\n2025-08-01 10:23:32 UTC [Info] Initializing with runtime configuration. Ledger name: null\n2025-08-01 10:23:32 UTC [Info] Using the constraint constants from the configuration file\n2025-08-01 10:23:41 UTC [Info] Loaded genesis ledger from $ledger_file\n  ledger_file: "/tmp/s3_cache_dir/genesis_ledger_5605a5a45c8ef6aac8fa88d5228640c00c16247a93cbeb55e2c95fd4782e88d2.tar.gz"\n2025-08-01 10:24:06 UTC [Warn] `block-producer-key` is deprecated. Please set `MINA_BP_PRIVKEY` environment variable instead.\nUsing block producer keypair private-key password from environment variable MINA_PRIVKEY_PASS\n2025-08-01 10:24:09 UTC [Info] Daemon will use chain id a7351abc7ddf2ea92d1b38cc8e636c271c1dfd2c081c637f62ebc2af34eb7cc1\n2025-08-01 10:24:09 UTC [Info] Daemon running protocol version 3.0.0\nUsing uptime submitter keypair private-key password from environment variable UPTIME_PRIVKEY_PASS\n2025-08-01 10:24:21 UTC [Info] Creating daemon with commit id: 939b08d879e4284829c897f8fa660ef89095b28e\n2025-08-01 10:24:21 UTC [Info] Starting a new prover process\n2025-08-01 10:24:37 UTC [Info] Daemon started process of kind "Prover" with pid 125\n2025-08-01 10:24:37 UTC [Info] Starting a new verifier process\n2025-08-01 10:24:40 UTC [Info] Daemon started process of kind "Verifier" with pid 152\n2025-08-01 10:24:40 UTC [Info] Starting a new vrf-evaluator process\n2025-08-01 10:24:40 UTC [Info] Daemon started process of kind "Vrf_evaluator" with pid 179\n2025-08-01 10:24:40 UTC [Info] Starting a new uptime service SNARK worker process\n2025-08-01 10:24:40 UTC [Info] Daemon started process of kind "Uptime_snark_worker" with pid 184\n2025-08-01 10:24:40 UTC [Info] Custom child process "libp2p_helper" started with pid 190\n2025-08-01 10:24:40 UTC [Error] libp2p_helper: failed to set log level debug for routing/record: error: No such logger\n2025-08-01 10:24:40 UTC [Info] libp2p peer ID this session is $peer_id\n  peer_id: "****"\n2025-08-01 10:24:40 UTC [Info] Starting transition router\n2025-08-01 10:24:40 UTC [Info] Initializing transition router\n2025-08-01 10:24:40 UTC [Warn] GCLOUD_KEYFILE environment variable not set. Must be set to use upload_blocks_to_gcloud\n2025-08-01 10:24:40 UTC [Info] Mina daemon is connecting\n2025-08-01 10:24:40 UTC [Info] Created GraphQL server at: http://localhost:3085/graphql\n2025-08-01 10:24:40 UTC [Info] Created GraphQL server with limited queries at: http://localhost:3095/graphql\n2025-08-01 10:24:40 UTC [Info] Initializing plugins\n2025-08-01 10:24:40 UTC [Info] Pausing block production while bootstrapping\n2025-08-01 10:24:40 UTC [Info] Starting uptime service using URL $url\n  url: "https://uptime-backend.minaprotocol.com/v1/submit"\n2025-08-01 10:24:40 UTC [Info] Stopping daemon after 10500 mins and when there are no blocks to be produced\n2025-08-01 10:24:40 UTC [Info] Attempted to turn on snark worker, but snark worker key is set to none\n2025-08-01 10:24:40 UTC [Info] Daemon ready. Clients can now connect\n'})}),"\n",(0,i.jsxs)(n.p,{children:["And checking with ",(0,i.jsx)(n.code,{children:"mina client status"})," command :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ docker exec -it mina mina client status\nMina daemon status\n-----------------------------------\n\nGlobal number of accounts:                     273694\nBlock height:                                  469394\nMax observed block height:                     469394\nMax observed unvalidated block height:         469394\nLocal uptime:                                  17m11s\nLedger Merkle root:                            jwZCJsEw4jKGFu7kvYht8p1uxVCPH5WV66h4HmBUXeHT9b5SbnT\nProtocol state hash:                           3NLQuNvNfzghP3w2NkDVuUcD9NKc6o1J6zfEw9iBHuPb6Nz4PDbr\nChain id:                                      a7351abc7ddf2ea92d1b38cc8e636c271c1dfd2c081c637f62ebc2af34eb7cc1\nGit SHA-1:                                     939b08d879e4284829c897f8fa660ef89095b28e\nConfiguration directory:                       /root/.mina-config\nPeers:                                         1\nUser_commands sent:                            0\nSNARK worker:                                  None\nSNARK work fee:                                100000000\nSync status:                                   Synced\nCatchup status:\n        To build breadcrumb:           0\n        To initial validate:           0\n        Finished:                      291\n        To download:                   0\n        Waiting for parent to finish:  0\n        To verify:                     0\n\nBlock producers running:                       1 (B62qpsy...)\nCoinbase receiver:                             B62qr1...\nBest tip consensus time:                       epoch=28, slot=2853\nBest tip global slot (across all hard-forks):  767253\nNext block will be produced in:                in **.**h for slot: ****** slot-since-genesis: ****** (Generated from consensus at slot: ****** slot-since-genesis: 766655)\nConsensus time now:                            epoch=28, slot=2855\nConsensus mechanism:                           proof_of_stake\nConsensus configuration:\n        Delta:                     0\n        k:                         290\n        Slots per epoch:           7140\n        Slot duration:             3m\n        Epoch duration:            14d21h\n        Chain start timestamp:     2024-06-05 00:00:00.000000Z\n        Acceptable network delay:  3m\n\nAddresses and ports:\n        External IP:    ***.***.***.***\n        Bind IP:        ***.***.***.***\n        Libp2p PeerID:  ****\n        Libp2p port:    8302\n        Client port:    8301\n      \nMetrics:\n        block_production_delay:             7 (0 0 0 0 0 0 0)\n        transaction_pool_diff_received:     10\n        transaction_pool_diff_broadcasted:  0\n        transactions_added_to_pool:         2\n        transaction_pool_size:              2\n        snark_pool_diff_received:           8\n        snark_pool_diff_broadcasted:        0\n        pending_snark_work:                 0\n        snark_pool_size:                    32\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,n,o)=>{o.d(n,{Z:()=>s,a:()=>t});var i=o(67294);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);