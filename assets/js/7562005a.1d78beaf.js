"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7091],{58410:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});var i=o(85893),r=o(11151);const a={sidebar_position:14,sidebar_label:"Running Mina Berkeley Node with Docker",sidebar_class_name:"green"},s="Running Mina Berkeley (the easiest way .. I found)",t={id:"Node operator guide/Running_Docker_Berkeley_Node/running_berkeley",title:"Running Mina Berkeley (the easiest way .. I found)",description:"STEP 1 - Pull latest docker image",source:"@site/docs/04-Node operator guide/Running_Docker_Berkeley_Node/running_berkeley.md",sourceDirName:"04-Node operator guide/Running_Docker_Berkeley_Node",slug:"/Node operator guide/Running_Docker_Berkeley_Node/running_berkeley",permalink:"/docs/Node operator guide/Running_Docker_Berkeley_Node/running_berkeley",draft:!1,unlisted:!1,editUrl:"https://github.com/naamahdaemon/minaamah/tree/main/docs/04-Node operator guide/Running_Docker_Berkeley_Node/running_berkeley.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14,sidebar_label:"Running Mina Berkeley Node with Docker",sidebar_class_name:"green"},sidebar:"mainSidebar",previous:{title:"Running Mina Archive Node with Docker",permalink:"/docs/Node operator guide/Run_Docker_Mainnet/running_docker_mainnet_archive"},next:{title:"Berkeley Node with Docker FAQ",permalink:"/docs/Node operator guide/Running_Docker_Berkeley_Node/running_berkeley_docker_faq"}},c={},d=[{value:"STEP 1 - Pull latest docker image",id:"step-1---pull-latest-docker-image",level:2},{value:"STEP 2 - Create your <code>keys</code> and <code>config</code> directories <strong>on the host</strong>",id:"step-2---create-your-keys-and-config-directories-on-the-host",level:2},{value:"STEP 3 - Getting an interactive bash session to the container",id:"step-3---getting-an-interactive-bash-session-to-the-container",level:2},{value:"STEP 4 - Generating libp2p keypair",id:"step-4---generating-libp2p-keypair",level:2},{value:"STEP 5 - Generating BP keys",id:"step-5---generating-bp-keys",level:2},{value:"STEP 6 - Launch Mina Daemon",id:"step-6---launch-mina-daemon",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"running-mina-berkeley-the-easiest-way--i-found",children:"Running Mina Berkeley (the easiest way .. I found)"}),"\n",(0,i.jsx)(n.h2,{id:"step-1---pull-latest-docker-image",children:"STEP 1 - Pull latest docker image"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ docker pull gcr.io/o1labs-192920/mina-daemon:2.0.0berkeley-rc1-1551e2f-focal-berkeley\n$ docker images\nREPOSITORY                  TAG                                        IMAGE ID       CREATED       SIZE\nminaprotocol/mina-daemon    2.0.0berkeley-rc1-1551e2f-focal-berkeley   353043fd4878   2 weeks ago   2.41GB\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"step-2---create-your-keys-and-config-directories-on-the-host",children:["STEP 2 - Create your ",(0,i.jsx)(n.code,{children:"keys"})," and ",(0,i.jsx)(n.code,{children:"config"})," directories ",(0,i.jsx)(n.strong,{children:"on the host"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ mkdir keys\n$ mkdir config\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-3---getting-an-interactive-bash-session-to-the-container",children:"STEP 3 - Getting an interactive bash session to the container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ docker run --name mina -p 9302:8302 -p 127.0.0.1:3085:3085 --mount \"type=bind,source=$(pwd)/keys,dst=/root/keys\" --mount \"type=bind,source=$(pwd)/config,dst=/root/.mina-config\" --env MINA_LIBP2P_PASS='pass' --env MINA_PRIVKEY_PASS='pass' --env UPTIME_PRIVKEY_PASS='pass' --entrypoint /bin/bash -it 353043fd4878\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Map ",(0,i.jsx)(n.code,{children:"keys"})," and ",(0,i.jsx)(n.code,{children:"config"})," directory from the host to the target container."]}),"\n",(0,i.jsxs)(n.li,{children:["Set your env variables ",(0,i.jsx)(n.code,{children:"MINA_LIBP2P_PASS"}),", ",(0,i.jsx)(n.code,{children:"MINA_PRIVKEY_PASS"})," (optionnal if you want to run a bloc producer) and UPTIME_PRIVKEY_PASS (not required/useless on berkeley)"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"353043fd4878"})," is your image id."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-4---generating-libp2p-keypair",children:"STEP 4 - Generating libp2p keypair"}),"\n",(0,i.jsx)(n.p,{children:"Once inside your container, you now have access to the shell.\nWe'll use this to generate the libp2p key pair inside the /root/keys directory :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"root@09437a971acb:~# mina libp2p generate-keypair -privkey-path /root/keys/libp2p\nPassword for new private key file:\nAgain to confirm:\nlibp2p keypair:\nCAESQFGW4XhXBHPsGf...\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Put the same password as the one you specify above for ",(0,i.jsx)(n.code,{children:"MINA_LIBP2P_PASS"})," environment variable"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-5---generating-bp-keys",children:"STEP 5 - Generating BP keys"}),"\n",(0,i.jsx)(n.p,{children:"Then we'll generate the BP key (if needed) :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"root@b8244db5dff8:~# mina-generate-keypair --privkey-path /root/keys/my-wallet\nPassword for new private key file:\nAgain to confirm:\nKeypair generated\nPublic key: B62...\nRaw public key: 63B...\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Put the same password as the one you specify above for ",(0,i.jsx)(n.code,{children:"MINA_PRIVKEY_PASS"})," environment variable"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-6---launch-mina-daemon",children:"STEP 6 - Launch Mina Daemon"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"root@b8244db5dff8:~# mina daemon --peer-list-url https://storage.googleapis.com/seed-lists/berkeley_seeds.txt --libp2p-keypair ~/keys/libp2p --block-producer-key /root/keys/my-wallet --insecure-rest-server --open-limited-graphql-port --limited-graphql-port 3095 --file-log-level Debug -log-level Info\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Once inside the container, pressing Ctrl + p, Ctrl + q will detach you from the container's console and leave the container running in the background."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You'll be able to reattach to you running mina container using :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ docker attach mina\n"})}),"\n",(0,i.jsx)(n.h1,{id:"launch-intercative-shell-session-again-and-check-mina-daemon-status",children:"Launch intercative shell session again and check mina daemon status"}),"\n",(0,i.jsx)(n.p,{children:"You can launch an additionnal interactive session again to interact with mina daemon if needed :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ docker exec -it mina /bin/bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Then you can get the status of you mina daemon and guess what ? ",(0,i.jsx)(n.strong,{children:"It is synced !!"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"root@156a3593fdf3:~# mina client status\nMina daemon status\n-----------------------------------\n\nGlobal number of accounts:                     8181\nBlock height:                                  4285\nMax observed block height:                     4285\nMax observed unvalidated block height:         4285\nLocal uptime:                                  26m32s\nLedger Merkle root:                            jwi4sfjSY6JYKrjaL2wUUhYb6t7Ra5p5JhiMdznNFxbSPFZoN4W\nProtocol state hash:                           3NLwovdQsqLfz8qHFrqbuLx7u4KccdbD94S65pKrw6tVVgHWkbkb\nChain id:                                      fd7d111973bf5a9e3e87384f560fdead2f272589ca00b6d9e357fca9839631da\nGit SHA-1:                                     1551e2faaa246c01636908aabe5f7981715a10f4\nConfiguration directory:                       /root/.mina-config\nPeers:                                         14\nUser_commands sent:                            0\nSNARK worker:                                  None\nSNARK work fee:                                100000000\nSync status:                                   Synced\nCatchup status:\n        To build breadcrumb:           0\n        To initial validate:           0\n        Finished:                      293\n        To download:                   0\n        Waiting for parent to finish:  0\n        To verify:                     0\n\nBlock producers running:                       1 (B62qmo7WKXRS3NNC7XNjZ15XDVD2doVgEoXKW4ELeE4SFDACzSm8vT7)\nCoinbase receiver:                             Block producer\nBest tip consensus time:                       epoch=1, slot=359\nBest tip global slot (across all hard-forks):  7499\nNext block will be produced in:                None this epoch\u2026 checking at in 14.125d (Generated from consensus at slot: 6970 slot-since-genesis: 6970)\nConsensus time now:                            epoch=1, slot=359\nConsensus mechanism:                           proof_of_stake\nConsensus configuration:\n        Delta:                     0\n        k:                         290\n        Slots per epoch:           7140\n        Slot duration:             3m\n        Epoch duration:            14d21h\n        Chain start timestamp:     2024-02-02 14:01:01.000000Z\n        Acceptable network delay:  3m\n\nAddresses and ports:\n        External IP:    0.0.0.0\n        Bind IP:        0.0.0.0\n        Libp2p PeerID:  12D3KooWE1tZXChc9c9ZbgwMgVVnmjqio49KKoZvEjeyaAEAWkYH\n        Libp2p port:    8302\n        Client port:    8301\n\nMetrics:\n        block_production_delay:             7 (0 0 0 0 0 0 0)\n        transaction_pool_diff_received:     48\n        transaction_pool_diff_broadcasted:  0\n        transactions_added_to_pool:         24\n        transaction_pool_size:              6\n        snark_pool_diff_received:           41\n        snark_pool_diff_broadcasted:        0\n        pending_snark_work:                 0\n        snark_pool_size:                    18\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,n,o)=>{o.d(n,{Z:()=>t,a:()=>s});var i=o(67294);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);