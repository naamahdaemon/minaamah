"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6747],{8393:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>k,contentTitle:()=>y,default:()=>w,frontMatter:()=>j,metadata:()=>f,toc:()=>D});var s=a(5893),n=a(1151),r=a(7294),i=(a(5742),a(2949)),o=a(2263),l=a(8767),d=a(9669),c=a.n(d),h=(a(938),a(6495));a(9085),a(9722);const u=new l.QueryClient,p=e=>{let{apiUrl:t,isRelative:a}=e;const[n,d]=(0,r.useState)(t),u=new Date,p=u.getFullYear(),g=u.getMonth(),b=new Date(p,g-1,1).toISOString().split("T")[0],x=new Date(p,g+1,0).toISOString().split("T")[0],[m,j]=(0,r.useState)(b),[y,f]=(0,r.useState)(x),{isDarkTheme:k}=(0,i.I)(),{siteConfig:D}=(0,o.Z)(),{isLoading:v,isError:w,data:B,error:C}=(0,l.useQuery)(["fetchAPI",{selectedApi:n}],(async()=>{const e=a?`https://akirion.com/${n}`:n;try{return(await c().get(e)).data}catch(C){throw new Error(C.message)}}),{retry:!1,retryOnMount:!1,refetchOnWindowFocus:!1});if(v)return(0,s.jsx)("div",{children:"Loading..."});if(w)return(0,s.jsxs)("div",{children:["Error: ",C.message]});const I={};B.data.blocks.forEach((e=>{const t=e.dateTime.split("T")[0];t in I?I[t]++:I[t]=1}));const S=Object.entries(I);console.log("blockCounts"),console.log(I),S.sort(((e,t)=>new Date(e[0])-new Date(t[0])));const _={};S.forEach((e=>{let[t,a]=e;_[t]=a}));const T=new Date(Object.keys(_)[0]),E=new Date,F=new Date(T);for(;F<=E;){const e=F.toISOString().split("T")[0];e in _||(_[e]=0),F.setDate(F.getDate()+1)}const A=Object.keys(_).sort();console.log("sortedBlockCounts"),console.log(_);A.map(((e,t)=>A.slice(0,t+1).reduce(((e,t)=>e+_[t]),0)));console.log(A.map((e=>_[e])));const P=S.filter((e=>{let[t]=e;return t>=m&&t<=y})),W={};P.forEach((e=>{let[t,a]=e;W[t]=a}));const O=Object.keys(W).sort(),G=O.map(((e,t)=>O.slice(0,t+1).reduce(((e,t)=>e+W[t]),0))),N={labels:O,datasets:[{type:"bar",label:"Number of Blocks",data:W,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,yAxisID:"y"},{label:"Cumulative Blocks",data:G,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y1"}]};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"B62qpsyB3gCndt8sNz4GRwusBtg9U72TNiL4mxmcQfWKZ5noa9fFnWr"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"inline-block",marginRight:"10px"},children:[(0,s.jsx)("label",{htmlFor:"startDate",children:"Start Date: "}),(0,s.jsx)("input",{type:"date",id:"startDate",value:m,onChange:e=>{j(e.target.value)}})]}),(0,s.jsxs)("div",{style:{display:"inline-block"},children:[(0,s.jsx)("label",{htmlFor:"endDate",children:"End Date: "}),(0,s.jsx)("input",{type:"date",id:"endDate",value:y,onChange:e=>{f(e.target.value)}})]})]}),(0,s.jsx)(h.x1,{data:N,options:{scales:{y:{position:"left",beginAtZero:!0,title:{display:!0,text:"Number of Blocks"}},y1:{position:"right",beginAtZero:!0,title:{display:!0,text:"Cumulative Blocks"}},x:{type:"time",time:{unit:"day",tooltipFormat:"yyyy-MM-dd"},title:{display:!0,labelString:"Date"}}}}}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Block Height"}),(0,s.jsx)("th",{children:"Date Time"}),(0,s.jsx)("th",{children:"Transaction Fees"}),(0,s.jsx)("th",{children:"Snark Fees"})]})}),(0,s.jsx)("tbody",{children:B.data.blocks.map(((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.blockHeight}),(0,s.jsx)("td",{children:e.dateTime}),(0,s.jsx)("td",{children:e.txFees/1e9}),(0,s.jsx)("td",{children:e.snarkFees/1e9})]},t)))})]})]})},g=e=>(0,s.jsx)(l.QueryClientProvider,{client:u,children:(0,s.jsx)(p,{...e})}),b=new l.QueryClient,x=e=>{let{apiUrl:t,isRelative:a}=e;const[n,d]=(0,r.useState)(t),[u,p]=(0,r.useState)(null),[g,b]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),{isDarkTheme:j}=(0,i.I)(),{siteConfig:y}=(0,o.Z)(),{isLoading:f,isError:k,data:D,error:v}=(0,l.useQuery)(["fetchAPI",{selectedApi:n}],(async()=>{const e=a?`https://akirion.com/${n}`:n;try{return(await c().get(e)).data}catch(v){throw new Error(v.message)}}),{retry:!1,retryOnMount:!1,refetchOnWindowFocus:!1});(0,r.useEffect)((()=>{if(D&&D.data&&D.data.stakes){const e=[...new Set(D.data.stakes.map((e=>e.epoch)))];b(e)}}),[D]),(0,r.useEffect)((()=>{if(D&&D.data&&D.data.stakes){let e=D.data.stakes.filter((e=>!u||e.epoch>=u)).map((e=>({epoch:e.epoch,publicKey:e.public_key,balance:e.balance})));e=e.sort(((e,t)=>e.epoch!==t.epoch?e.epoch-t.epoch:t.balance-e.balance)),m(e)}}),[u,D]);if(f)return(0,s.jsx)("div",{children:"Loading..."});if(k)return(0,s.jsxs)("div",{children:["Error: ",v.message]});let w=D.data.stakes.filter((e=>"B62qpsyB3gCndt8sNz4GRwusBtg9U72TNiL4mxmcQfWKZ5noa9fFnWr"===e.public_key&&(!u||e.epoch>=u)));const B=w.map((e=>e.epoch)),C={labels:B,datasets:[{type:"bar",label:"Total Delegated",data:w.map((e=>e.delegationTotals.totalDelegated)),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,yAxisID:"y"},{label:"# Delegates",data:w.map((e=>e.delegationTotals.countDelegates)),backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y1"}]};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"B62qpsyB3gCndt8sNz4GRwusBtg9U72TNiL4mxmcQfWKZ5noa9fFnWr"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"epoch",children:"Select Epoch after: "}),(0,s.jsxs)("select",{id:"epoch",value:u||"",onChange:e=>{p(parseInt(e.target.value))},children:[(0,s.jsx)("option",{value:"",children:"All Epochs"}),B.map((e=>(0,s.jsx)("option",{value:e,children:e},e)))]})]}),(0,s.jsx)(h.x1,{data:C,options:{scales:{y:{position:"left",beginAtZero:!0,title:{display:!0,text:"Total Delegated"}},y1:{position:"right",beginAtZero:!0,title:{display:!0,text:"# Delegates"}},x:{title:{display:!0,labelString:"Epoch"}}}}}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Epoch"}),(0,s.jsx)("th",{children:"Public Key"}),(0,s.jsx)("th",{children:"Balance"})]})}),(0,s.jsx)("tbody",{children:x.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.epoch}),(0,s.jsx)("td",{children:e.publicKey}),(0,s.jsx)("td",{children:e.balance})]})))})]})]})},m=e=>(0,s.jsx)(l.QueryClientProvider,{client:b,children:(0,s.jsx)(x,{...e})}),j={title:"BP Information",sidebar_label:"BP Information",hide_table_of_contents:!0},y="BP Stats",f={id:"General Information/node_status",title:"BP Information",description:"Blocks",source:"@site/docs/01-General Information/node_status.md",sourceDirName:"01-General Information",slug:"/General Information/node_status",permalink:"/docs/General Information/node_status",draft:!1,unlisted:!1,editUrl:"https://github.com/naamahdaemon/minaamah/tree/main/docs/01-General Information/node_status.md",tags:[],version:"current",frontMatter:{title:"BP Information",sidebar_label:"BP Information",hide_table_of_contents:!0},sidebar:"mainSidebar",previous:{title:"Delegation Program",permalink:"/docs/General Information/delegation_program"},next:{title:"Buying Mina",permalink:"/docs/Wallet owner guide/Buy mina"}},k={},D=[{value:"Blocks",id:"blocks",level:2},{value:"Delegations",id:"delegations",level:2}];function v(e){const t={h1:"h1",h2:"h2",hr:"hr",...(0,n.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"bp-stats",children:"BP Stats"}),"\n","\n","\n",(0,s.jsx)(t.h2,{id:"blocks",children:"Blocks"}),"\n",(0,s.jsx)(g,{apiUrl:"node_info.json",isRelative:"true"}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"delegations",children:"Delegations"}),"\n",(0,s.jsx)(m,{apiUrl:"node_delegations.json",isRelative:"true"})]})}function w(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(v,{...e})}):v(e)}}}]);